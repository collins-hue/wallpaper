{% extends "base.html" %}
{% block content %}

    <div class="container">
        <h1>Donate</h1>
        <p>Your donation helps us continue our mission. Please choose your preferred payment method below.</p>
        
        <form action="{% url 'wallpaper_app:buy_us_coffee' %}" method="POST" id="payment-form">
            {% csrf_token %}
            <div>
                <label for="amount">Donation Amount (USD):</label>
                <input type="number" name="amount" id="amount" required min="1">
            </div>
            
            <!-- Stripe Payment -->
            <button type="submit" id="stripe-button">Donate with Stripe</button>

            <!-- PayPal Payment -->
            <div id="paypal-button-container"></div>
        </form>
    </div>

    <script>
        // Stripe Integration
        var stripe = Stripe('your-stripe-public-key');
        var elements = stripe.elements();
        var card = elements.create('card');
        card.mount('#stripe-button');

        // PayPal Integration
        paypal.Buttons({
            createOrder: function(data, actions) {
                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: document.getElementById('amount').value
                        }
                    }]
                });
            },
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                    alert('Donation successful, thank you!');
                });
            }
        }).render('#paypal-button-container');
    </script>

{% endblock %}